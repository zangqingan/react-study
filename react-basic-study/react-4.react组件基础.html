<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4.react组件基础</title>
</head>
<body>
  <div id="root">  

  </div>
  <hr>  
  <div>
    <h3>1.react组件</h3>
    <p>
        组件从概念上类似于 JavaScript 函数。它也接受任意的形参(用 “props”对象标识),并返回用于描述页面展示内容的 React 元素即jsx。
        简单理解就是react组件就是一个返回react元素的js函数,区别在于这个函数里使用的是JSX语法也就是js里写html标签的语法。
        组件的定义和分类:
        react组件从组件声明的方式划分分类有两种:函数组件和class组件
        1.函数组件,用function关键字声明本质上还是js函数,注意首字母必须大写。
        function Welcome(props) {
          return <h1>Hello, {props.name}</h1>;//返回的是 react元素 
        }

        2.class组件,使用es6的class关键字声明,而在js里class本质也是一个函数。注意:react中所有组件都是继承React.Component 
        class Welcome extends React.Component {
          render() {
            return <h1>Hello, {this.props.name}</h1>;
          }
        }
        
        由此可见react组件本质上就是一个JavaScript函数,只不过函数名(组件名)称必须以大写字母开头,因为react会将以小写字母开头的组件视为原生 DOM 标签,同时里面使用的是JSX语法即一般返回的是react元素。
        组件的使用:
          和vue也是类似的,定义组件之后就像使用原生html标签一样使用react组件,const element = <自定义react组件名>。
          当 React 元素为用户自定义的组件时,它会将 JSX 所接收的属性(attributes)以及子组件(children)都放到一个对象里传递给组件,这个对象被称之为 “props”。
          这时自定义组件内部就可以通过 props.属性名 访问接收的参数。
        注意:props的命名从组件自身的角度命名 props,而不是依赖于调用组件的上下文命名。
        组件无论是使用函数声明还是通过 class 声明,都决不能修改自身的 props而是只是读取。跟vue类似不能直接在子组件内部手动修改。
        即所有 React 组件都必须像纯函数一样保护它们的 props 不被更改。

        要像修改值要使用'state'状态来改变。

    </p>
    <h3>2.组件的复用和组合</h3>
    <p>
      组件在定义之后是可以重复使用也就是复用的,同时在定义组件时也可以引用或者输出其他组件。
      这样就形成了组件的嵌套使用。
    </p>
  </div>

  <script src="./js/react.development.js" ></script>  
  <script src="./js/react-dom.development.js" ></script>
  <script src="./js/babel.min.js"></script>
  <script type="text/babel">
  // avatar组件，孙孙子组件
  function Avatar(props){
     return(
      <img className="Avatar" src={props.user.avatarUrl} alt={props.user.name} />
    )
  }
  // UserInfo组件，孙子组件
  function UserInfo(props){
    return (
    <div className="UserInfo">
      <Avatar user={props.user} />      
      <div className="UserInfo-name">
        {props.user.name}      
      </div>    
    </div>
    );
  }
  // Comment组件，子组件 
  function Comment(props) {
    return (
      <div className="Comment">
        {
          /*
            再把整个UserInfo抽离成一个组件 
            <div className="UserInfo">
              {
                
                  我们再把这个img抽离成一个头像组件 
                  <img className="Avatar"
                  src={props.author.avatarUrl}
                  alt={props.author.name} />
                
              }
              <Avatar user={props.author}/>
              <div className="UserInfo-name">
                {props.author.name}
              </div>
            </div>
          */
        }
        <UserInfo user={props.author}/>
        <div className="Comment-text">
          {props.text}
        </div>
        <div className="Comment-date">
          {/* 花括号相当于vue的插值表达式,所以可以运行js函数*/}
          {formatDate(props.date)}
        </div>
      </div>
    );
  }
  // 1.函数定义，父级组件 
  function Welcome(props) {
      return (
        <div>
          <h1>Hello, {props.name}</h1>
          {
            /*
            // 跟vue组件类似传入props不过属性名前不用加:声明未动态绑定,react 会自动动态绑定。
            //date,text,author都是自己定义定义props属性名,即Comment组件内部使用props.属性名访问的。
            //即:props.date、props.text、props.author
            */
          }
          <Comment date={comment.date} text={comment.text} author={comment.author} />
    </div>
      );
  }
  // 2.类定义  根组件
  class App extends React.Component{
    render() {
     return( 
       <div>
          <Welcome name="Sara" />
          <Welcome name="张三" />
        </div>
      )
    }
  }
  // 定义一个处理本地日期格式的函数
  function formatDate(date) {
    return date.toLocaleDateString();
  }


  // 数据对象类似vue中的data中定义的数据
  const comment = {
    date: new Date(),
    text: 'I hope you enjoy learning React!',
    author: {
      name: 'Hello Kitty',
      avatarUrl: 'http://placekitten.com/g/64/64'
    }
  };


  const element = <App/>;
  ReactDOM.render(
    element,
    document.getElementById('root')
  );


  </script>
</body>
</html>