{"diagram":{"image":{"x":0,"width":200,"y":0,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","height":200},"elements":{"leftChildren":[],"note":"","watermark":"","children":[{"parent":"root","lineStyle":{"lineColor":"#BBDEFB"},"children":[{"parent":"812b3a9306dd","note":"","children":[],"id":"ac25a09c6779","title":"高阶组件（HOC）是&nbsp;React&nbsp;中用于复用组件逻辑的一种高级技巧。HOC&nbsp;自身不是&nbsp;React&nbsp;API&nbsp;的一部分，它是一种基于&nbsp;React&nbsp;的组合特性而形成的设计模式<br>","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"812b3a9306dd","children":[],"style":{"color":"#2196F3","font-weight":"bold"},"id":"4d70d73dad33","title":"具体而言，高阶组件是参数为组件，返回值为新组件的函数<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"812b3a9306dd","children":[],"style":{"color":"#2196F3","font-weight":"bold"},"id":"06421878cf25","title":"组件是将&nbsp;props&nbsp;转换为&nbsp;UI，而高阶组件是将组件转换为另一个组件","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"background-color":"#BBDEFB","border-radius":"5px","color":"#212121","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"812b3a9306dd","title":"介绍<br>"},{"parent":"root","lineStyle":{"lineColor":"#E1BEE7","lineWidth":"2"},"children":[{"parent":"896498dd7718","children":[],"id":"e3e9b1f96002","title":"使用&nbsp;HOC&nbsp;解决横切关注点问题"}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#212121","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#E1BEE7","lineStype":{"lineColor":"#E1BEE7","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#E1BEE7","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"896498dd7718","title":"场景"},{"parent":"root","lineStyle":{"lineColor":"#FFCDD2","lineWidth":"2"},"children":[{"parent":"5bf8fe5c3c71","note":"","children":[],"id":"4b0af9a73e1a","title":"不要试图在&nbsp;HOC&nbsp;中修改组件原型（或以其他方式改变它）","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"5bf8fe5c3c71","children":[],"id":"b327245658d2","title":"这样做会产生一些不良后果。其一是输入组件再也无法像&nbsp;HOC&nbsp;增强之前那样使用了。更严重的是，如果你再用另一个同样会修改&nbsp;componentDidUpdate&nbsp;的&nbsp;HOC&nbsp;增强它，那么前面的&nbsp;HOC&nbsp;就会失效！同时，这个&nbsp;HOC&nbsp;也无法应用于没有生命周期的函数组件<br>修改传入组件的&nbsp;HOC&nbsp;是一种糟糕的抽象方式。调用者必须知道他们是如何实现的，以避免与其他&nbsp;HOC&nbsp;发生冲突<br>HOC&nbsp;不应该修改传入组件，而应该使用组合的方式，通过将组件包装在容器组件中实现功能<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"5bf8fe5c3c71","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"lineStype":{"lineType":"roundBroken","lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"19ebcaef8a05","title":"您可能已经注意到&nbsp;HOC&nbsp;与容器组件模式之间有相似之处。容器组件担任分离将高层和低层关注的责任，由容器管理订阅和状态，并将&nbsp;prop&nbsp;传递给处理渲染&nbsp;UI。HOC&nbsp;使用容器作为其实现的一部分，你可以将&nbsp;HOC&nbsp;视为参数化容器组件<br>","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#212121","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"#FFCDD2","lineStype":{"lineColor":"#FFCDD2","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#FFCDD2","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"5bf8fe5c3c71","title":"不要改变原始组件，使用组合<br>"},{"parent":"root","lineStyle":{"lineColor":"#C8E6C9","lineWidth":"2"},"children":[{"parent":"a01eafed5bb9","note":"","children":[],"style":{"color":"#4CAF50","font-weight":"bold"},"id":"15028f67c0e5","title":"将不相关的&nbsp;props&nbsp;传递给被包裹的组件","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"a01eafed5bb9","children":[],"style":{"color":"#4CAF50","font-weight":"bold"},"id":"412c765359ca","title":"最大化可组合性<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"a01eafed5bb9","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"lineStype":{"lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#4CAF50","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"bold","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"793c480c9601","title":"包装显示名称以便轻松调试","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#212121","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"#C8E6C9","lineStype":{"lineColor":"#F57F17","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#C8E6C9","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"a01eafed5bb9","title":"约定<br>"},{"parent":"root","lineStyle":{"lineColor":"#FFE0B2","lineWidth":"2"},"children":[{"parent":"cecb23f7996e","note":"","children":[],"style":{"font-weight":"bold"},"id":"10eb40fe09d6","title":"不要在&nbsp;render&nbsp;方法中使用&nbsp;HOC","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"cecb23f7996e","children":[{"parent":"9e830d23e729","children":[],"id":"ed0301a470ac","title":"当你将&nbsp;HOC&nbsp;应用于组件时，原始组件将使用容器组件进行包装。这意味着新组件没有原始组件的任何静态方法。<br>为了解决这个问题，你可以在返回之前把这些方法拷贝到容器组件上<br>"},{"parent":"9e830d23e729","children":[],"id":"99feefc0f627","title":"你可以使用&nbsp;hoist-non-react-statics&nbsp;自动拷贝所有非&nbsp;React&nbsp;静态方法"}],"style":{"font-weight":"bold"},"id":"9e830d23e729","title":"务必复制静态方法<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"cecb23f7996e","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[{"parent":"3e27caf3cc77","children":[],"id":"f911bc47b8a4","title":"虽然高阶组件的约定是将所有&nbsp;props&nbsp;传递给被包装组件，但这对于&nbsp;refs&nbsp;并不适用。那是因为&nbsp;ref&nbsp;实际上并不是一个&nbsp;prop&nbsp;-&nbsp;就像&nbsp;key&nbsp;一样，它是由&nbsp;React&nbsp;专门处理的。如果将&nbsp;ref&nbsp;添加到&nbsp;HOC&nbsp;的返回组件中，则&nbsp;ref&nbsp;引用指向容器组件，而不是被包装组件"},{"parent":"3e27caf3cc77","children":[],"id":"00da293fd649","title":"这个问题的解决方案是通过使用&nbsp;React.forwardRef&nbsp;API（React&nbsp;16.3&nbsp;中引入）"}],"style":{"lineStype":{"lineType":"roundBroken","lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"bold","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"3e27caf3cc77","title":"Refs&nbsp;不会被传递","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#212121","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#FFE0B2","lineStype":{"lineColor":"#FFE0B2","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#FFE0B2","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"cecb23f7996e","title":"注意事项<br>"}],"root":true,"theme":"customise_7fd055efa78b","style":{"background-color":"rgb(255, 83, 92)","border-radius":"6px","color":"rgb(255, 255, 255)","font-weight":"bold","border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"root","title":"高阶组件","icons":[{"color":"rgb(255, 255, 255)","name":"","index":"60"}],"structure":"mind_free"}},"meta":{"exportTime":"2022-04-06 17:24:33","member":"60cca488e0b34d55bbf2954f","diagramInfo":{"creator":"60cca488e0b34d55bbf2954f","created":"2022-04-06 17:11:19","modified":"2022-04-06 17:24:25","title":"3.7","category":"mind_free"},"id":"624d5937079129641e41e760","type":"ProcessOn Schema File","version":"1.0"}}