{"diagram":{"image":{"x":0,"width":200,"y":0,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","height":200},"elements":{"leftChildren":[],"note":"","margin":{"childMarginW":10,"childMarginH":5,"marginW":20,"marginH":10},"watermark":"","children":[{"parent":"root","lineStyle":{"randomLineColor":"rgb(255,204,204)","lineColor":"#7B1FA2"},"children":[{"parent":"acb4883d19e1","note":"","children":[],"id":"92cecac22e33","title":"当你需要对你的&nbsp;React&nbsp;应用进行&nbsp;benchmark，或者遇到了性能问题，请确保你正在使用压缩后的生产版本","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"acb4883d19e1","children":[],"id":"7eb066bf6c6a","title":"React&nbsp;默认包含了许多有用的警告信息。这些警告信息在开发过程中非常有帮助。然而这使得&nbsp;React&nbsp;变得更大且更慢，所以需要确保部署时使用了生产版本。<br>如果你不能确定你的编译过程是否设置正确，你可以通过安装&nbsp;Chrome&nbsp;的&nbsp;React&nbsp;开发者工具&nbsp;来检查。<br>如果你浏览一个基于&nbsp;React&nbsp;生产版本的网站，图标背景会变成深色，如果是开发模式，图标背景会变成红色<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"acb4883d19e1","children":[],"id":"d71990a0d542","title":"你可以在下面看到几种为应用构建生产版本的操作说明","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"background-color":"#7B1FA2","border-radius":"5px","color":"rgb(255, 255, 255)","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"acb4883d19e1","title":"简述"},{"parent":"root","lineStyle":{"lineColor":"#1976D2","lineWidth":"2"},"children":[{"parent":"0705770fd2ee","note":"","children":[{"parent":"7528d0288aed","children":[],"id":"58b595fcbaaa","title":"npm&nbsp;run&nbsp;build"}],"boundaries":[],"id":"7528d0288aed","title":"如果你的项目是通过&nbsp;Create&nbsp;React&nbsp;App&nbsp;构建的，运行：","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"0705770fd2ee","children":[],"id":"82f078a30dab","title":"这段命令将在你的项目下的&nbsp;build/&nbsp;目录中生成对应的生产版本","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"0705770fd2ee","children":[],"id":"4696eeec90bc","title":"注意只有在生产部署前才需要执行这个命令。正常开发使用&nbsp;npm&nbsp;start&nbsp;即可","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#F5F5F5","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#1976D2","lineStype":{"lineColor":"#1976D2","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#1976D2","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"0705770fd2ee","title":"Create&nbsp;React&nbsp;App"},{"parent":"root","lineStyle":{"lineColor":"#388E3C","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"children":[{"parent":"077289c0f72e","note":"","children":[],"id":"e2848b441747","title":"我们提供了可以在生产环境使用的单文件版&nbsp;React&nbsp;和&nbsp;React&nbsp;DOM，如下","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"077289c0f72e","children":[],"id":"90669add584b","title":"&lt;script&nbsp;src=\"https://unpkg.com/react@16/umd/react.production.min.js\"&gt;&lt;/script&gt;<br>&lt;script&nbsp;src=\"https://unpkg.com/react-dom@16/umd/react-dom.production.min.js\"&gt;&lt;/script&gt;","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"rgb(255, 255, 255)","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"#388E3C","lineStype":{"lineColor":"#388E3C","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#388E3C","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"077289c0f72e","title":"单文件构建"},{"parent":"root","lineStyle":{"lineColor":"#F57F17","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"children":[{"parent":"4fddcf0c629c","note":"","children":[{"parent":"2b86d552e6f2","children":[],"style":{"background-color":"#F5F5F5"},"id":"0292bff6abc9","title":"#&nbsp;如果你使用&nbsp;npm<br>npm&nbsp;install&nbsp;--save-dev&nbsp;terser-brunch<br><br>#&nbsp;如果你使用&nbsp;Yarn<br>yarn&nbsp;add&nbsp;--dev&nbsp;terser-brunch"}],"boundaries":[{"boundary":true,"parent":"2b86d552e6f2","boundRank":1,"children":[],"pos":{"miny":9913,"minx":10607,"maxY":10025,"maxX":10867},"range":"0,0","style":{"lineType":"1","dasharray":"6,3","opacity":"0.1","lineWidth":"1"},"id":"c2691f29ab02","title":"外框"}],"id":"2b86d552e6f2","title":"通过安装&nbsp;terser-brunch&nbsp;插件，<br>来获得最高效的&nbsp;Brunch&nbsp;生产构建","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"4fddcf0c629c","children":[{"parent":"15db7c03f9c2","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"background-color":"#F5F5F5","lineStype":{"lineType":"roundBroken","lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"b6ae690ee690","title":"brunch&nbsp;build&nbsp;-p"}],"boundaries":[{"boundary":true,"parent":"15db7c03f9c2","boundRank":1,"children":[],"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#F44336","fill":"#F44336","opacity":"0.1","lineWidth":"1"},"id":"17d9aeb25c5a","title":"外框"}],"id":"15db7c03f9c2","title":"接着，在&nbsp;build&nbsp;命令后添加&nbsp;-p&nbsp;参数，以创建生产构建","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"rgb(255, 255, 255)","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"#F57F17","lineStype":{"lineColor":"#F57F17","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#F57F17","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"4fddcf0c629c","title":"Brunch"},{"parent":"root","lineStyle":{"lineColor":"#E57373","lineWidth":"2"},"children":[{"parent":"af0985f2ef6c","note":"","children":[{"parent":"2c1903315d01","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"background-color":"#F5F5F5","lineStype":{"lineType":"roundBroken","lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"540c91885b6e","title":"#&nbsp;如果你使用&nbsp;npm<br>npm&nbsp;install&nbsp;--save-dev&nbsp;envify&nbsp;terser&nbsp;uglifyify<br>#&nbsp;如果你使用&nbsp;Yarn<br>yarn&nbsp;add&nbsp;--dev&nbsp;envify&nbsp;terser&nbsp;uglifyify"}],"boundaries":[{"boundary":true,"parent":"2c1903315d01","boundRank":1,"children":[],"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#F44336","fill":"#F44336","opacity":"0.1","lineWidth":"1"},"id":"64f5fac7ddce","title":"外框"}],"id":"2c1903315d01","title":"为了最高效的生产构建，<br>需要安装一些插件","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"af0985f2ef6c","note":"举个例子：\n\nbrowserify ./index.js \\\n  -g [ envify --NODE_ENV production ] \\\n  -g uglifyify \\\n  | terser --compress --mangle &gt; ./bundle.js","children":[{"parent":"16615de5a7a0","children":[],"id":"96036df3175e","title":"envify&nbsp;转换器用于设置正确的环境变量。设置为全局&nbsp;(-g)。"},{"parent":"16615de5a7a0","children":[],"id":"ded1790563d9","title":"uglifyify&nbsp;转换器移除开发相关的引用代码。同样设置为全局&nbsp;(-g)。"},{"parent":"16615de5a7a0","children":[],"id":"7f6b1a72b8fb","title":"最后，将产物传给&nbsp;terser&nbsp;并进行压缩"}],"id":"16615de5a7a0","title":"为了创建生产构建，<br>确保你添加了以下转换器&nbsp;（顺序很重要）","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#F5F5F5","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#E57373","lineStype":{"lineColor":"#E57373","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#E57373","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"af0985f2ef6c","title":"Browserify"},{"parent":"root","lineStyle":{"lineColor":"#2196F3","lineWidth":"2"},"children":[{"parent":"814789d88fd6","note":"","children":[{"parent":"541d77717a04","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"background-color":"#F5F5F5","lineStype":{"lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"54c4cb94f088","title":"#&nbsp;如果你使用&nbsp;npm\nnpm&nbsp;install&nbsp;--save-dev&nbsp;rollup-plugin-commonjs&nbsp;rollup-plugin-replace&nbsp;rollup-plugin-terser\n\n#&nbsp;如果你使用&nbsp;Yarn\nyarn&nbsp;add&nbsp;--dev&nbsp;rollup-plugin-commonjs&nbsp;rollup-plugin-replace&nbsp;rollup-plugin-terser"}],"boundaries":[{"boundary":true,"parent":"541d77717a04","boundRank":1,"children":[],"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#F44336","fill":"#F44336","opacity":"0.1","lineWidth":"1"},"id":"41c7523a0e55","title":"外框"}],"id":"541d77717a04","title":"为了最高效的&nbsp;Rollup&nbsp;生产构建，<br>需要安装一些插件","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"814789d88fd6","note":"plugins: [\n  // ...\n  require(&#39;rollup-plugin-replace&#39;)({\n    &#39;process.env.NODE_ENV&#39;: JSON.stringify(&#39;production&#39;)\n  }),\n  require(&#39;rollup-plugin-commonjs&#39;)(),\n  require(&#39;rollup-plugin-terser&#39;)(),\n  // ...\n]","children":[{"parent":"e9f1005c7caa","children":[],"id":"01f3cb673a08","title":"replace&nbsp;插件确保环境被正确设置。"},{"parent":"e9f1005c7caa","children":[],"id":"88d3a1f89abb","title":"commonjs&nbsp;插件用于支持&nbsp;CommonJS。"},{"parent":"e9f1005c7caa","children":[],"id":"19aeba1793e1","title":"terser&nbsp;插件用于压缩并生成最终的产物。"}],"id":"e9f1005c7caa","title":"为了创建生产构建，<br>确保你添加了以下插件&nbsp;（顺序很重要）","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#F5F5F5","textAlign":"left","font-weight":"bold","font-size":"14px","font-style":"normal","border-radius":"5px","lineStype":{"lineColor":"#2196F3","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#2196F3","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"814789d88fd6","title":"Rollup"},{"parent":"root","lineStyle":{"lineColor":"#00BCD4"},"children":[{"parent":"1626b2def64a","note":"const TerserPlugin = require(&#39;terser-webpack-plugin&#39;);\n\nmodule.exports = {\n  mode: &#39;production&#39;,\n  optimization: {\n    minimizer: [new TerserPlugin({ /* additional options here */ })],\n  },\n};","children":[],"id":"550593e1324b","title":"在生产模式下，Webpack&nbsp;v4+&nbsp;将默认对代码进行压缩"}],"style":{"background-color":"#00BCD4","border-radius":"6px","color":"rgb(255, 255, 255)","font-weight":"bold","border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"1626b2def64a","title":"webpack"}],"root":true,"theme":"customise_7fd055efa78b","style":{"background-color":"rgb(255, 83, 92)","border-radius":"6px","color":"rgb(255, 255, 255)","font-weight":"bold","border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"root","title":"性能优化之生产版本","icons":[{"color":"rgb(255, 255, 255)","name":"","index":"57"}],"structure":"mind_free"}},"meta":{"exportTime":"2022-04-07 18:16:12","member":"60cca488e0b34d55bbf2954f","diagramInfo":{"creator":"60cca488e0b34d55bbf2954f","created":"2022-04-07 18:02:28","modified":"2022-04-07 18:16:04","title":"3.10.1性能优化之生产版本","category":"mind_free"},"id":"624eb6b41efad4078915d2d1","type":"ProcessOn Schema File","version":"1.0"}}