{"diagram":{"image":{"x":0,"width":200,"y":0,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","height":200},"elements":{"leftChildren":[],"note":"","watermark":"","children":[{"parent":"root","lineStyle":{"lineColor":"#BBDEFB"},"children":[{"parent":"812b3a9306dd","note":"","children":[],"id":"ac25a09c6779","title":"在大多数情况下，我们推荐使用&nbsp;受控组件&nbsp;来处理表单数据。在一个受控组件中，表单数据是由&nbsp;React&nbsp;组件来管理的。<br>另一种替代方案是使用非受控组件，这时表单数据将交由&nbsp;DOM&nbsp;节点来处理","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"812b3a9306dd","children":[],"id":"4d70d73dad33","title":"要编写一个非受控组件，而不是为每个状态更新都编写数据处理函数，你可以&nbsp;使用&nbsp;ref&nbsp;来从&nbsp;DOM&nbsp;节点中获取表单数据<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"812b3a9306dd","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[{"parent":"06421878cf25","note":"class NameForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.input = React.createRef();\n  }\n\n  handleSubmit(event) {\n    alert(&#39;A name was submitted: &#39; + this.input.current.value);\n    event.preventDefault();\n  }\n\n  render() {\n    return (\n      &lt;form onSubmit={this.handleSubmit}&gt;\n        &lt;label&gt;\n          Name:\n          &lt;input type=&quot;text&quot; ref={this.input} /&gt;\n        &lt;/label&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;\n      &lt;/form&gt;\n    );\n  }\n}","children":[],"id":"9b7c5ea74cb3","title":"代码"}],"style":{"lineStype":{"lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","font-style":"normal"},"id":"06421878cf25","title":"例如，下面的代码使用非受控组件接受一个表单的值","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]},{"parent":"812b3a9306dd","children":[],"id":"55e4649269b6","title":"因为非受控组件将真实数据储存在&nbsp;DOM&nbsp;节点中，所以在使用非受控组件时，有时候反而更容易同时集成&nbsp;React&nbsp;和非&nbsp;React&nbsp;代码。如果你不介意代码美观性，并且希望快速编写代码，使用非受控组件往往可以减少你的代码量。否则，你应该使用受控组件","icons":[{"color":"rgb(255, 159, 26)","name":"priority","index":"3","text":"&#xe635"}]}],"style":{"background-color":"#BBDEFB","border-radius":"5px","color":"#212121","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"812b3a9306dd","title":"介绍<br>"},{"parent":"root","lineStyle":{"lineColor":"#E1BEE7","lineWidth":"2"},"children":[{"parent":"896498dd7718","note":"","children":[],"id":"3c25c1c2ba10","title":"在&nbsp;React&nbsp;渲染生命周期时，表单元素上的&nbsp;value&nbsp;将会覆盖&nbsp;DOM&nbsp;节点中的值，在非受控组件中，<br>你经常希望&nbsp;React&nbsp;能赋予组件一个初始值，但是不去控制后续的更新。&nbsp;在这种情况下,&nbsp;你可以指定一个&nbsp;defaultValue&nbsp;属性，而不是&nbsp;value","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#212121","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#E1BEE7","lineStype":{"lineColor":"#E1BEE7","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#E1BEE7","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"896498dd7718","title":"默认值<br>"},{"parent":"root","lineStyle":{"lineColor":"#FFCDD2","lineWidth":"2"},"children":[{"parent":"5bf8fe5c3c71","note":"","children":[],"id":"4b0af9a73e1a","title":"在&nbsp;HTML&nbsp;中，&lt;input&nbsp;type=\"file\"&gt;&nbsp;可以让用户选择一个或多个文件上传到服务器，或者通过使用&nbsp;File&nbsp;API&nbsp;进行操作","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"5bf8fe5c3c71","children":[],"id":"b327245658d2","title":"在&nbsp;React&nbsp;中，&lt;input&nbsp;type=\"file\"&nbsp;/&gt;&nbsp;始终是一个非受控组件，因为它的值只能由用户设置，而不能通过代码控制<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"5bf8fe5c3c71","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[{"parent":"19ebcaef8a05","note":"class FileInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.fileInput = React.createRef();\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n    alert(\n      `Selected file - ${this.fileInput.current.files[0].name}`\n    );\n  }\n\n  render() {\n    return (\n      &lt;form onSubmit={this.handleSubmit}&gt;\n        &lt;label&gt;\n          Upload file:\n          &lt;input type=&quot;file&quot; ref={this.fileInput} /&gt;\n        &lt;/label&gt;\n        &lt;br /&gt;\n        &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;\n      &lt;/form&gt;\n    );\n  }\n}\n\nReactDOM.render(\n  &lt;FileInput /&gt;,\n  document.getElementById(&#39;root&#39;)\n);","children":[],"id":"c03ef8abce97","title":"具体代码"}],"style":{"lineStype":{"lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","font-style":"normal"},"id":"19ebcaef8a05","title":"下面的例子显示了如何创建一个&nbsp;DOM&nbsp;节点的&nbsp;ref&nbsp;从而在提交表单时获取文件的信息","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#212121","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"#FFCDD2","lineStype":{"lineColor":"#FFCDD2","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#FFCDD2","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"5bf8fe5c3c71","title":"文件输入<br>"}],"root":true,"theme":"customise_7fd055efa78b","style":{"background-color":"#2196F3","border-radius":"6px","color":"rgb(255, 255, 255)","font-weight":"bold","font-size":15,"border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"root","title":"非受控组件","icons":[{"color":"rgb(255, 255, 255)","name":"","index":"50"}],"structure":"mind_free"}},"meta":{"exportTime":"2022-04-08 23:30:37","member":"60cca488e0b34d55bbf2954f","diagramInfo":{"creator":"60cca488e0b34d55bbf2954f","created":"2022-04-08 23:24:48","modified":"2022-04-08 23:30:25","title":"3.21非受控组件","category":"mind_free"},"id":"625053c05653bb0743ca3b01","type":"ProcessOn Schema File","version":"1.0"}}