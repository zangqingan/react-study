{"diagram":{"image":{"x":0,"width":200,"y":0,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","height":200},"elements":{"leftChildren":[],"note":"","margin":{"childMarginW":10,"childMarginH":5,"marginW":20,"marginH":10},"watermark":"","children":[{"parent":"root","lineStyle":{"randomLineColor":"rgb(255,204,204)","lineColor":"#BBDEFB"},"children":[{"parent":"812b3a9306dd","note":"","children":[{"parent":"ac25a09c6779","children":[],"id":"dfa3ab9beb73","title":"import&nbsp;TestRenderer&nbsp;from&nbsp;'react-test-renderer';"}],"id":"ac25a09c6779","title":"ES6","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"812b3a9306dd","children":[{"parent":"4d70d73dad33","children":[],"id":"75732f394801","title":"const&nbsp;TestRenderer&nbsp;=&nbsp;require('react-test-renderer');"}],"id":"4d70d73dad33","title":"ES5&nbsp;使用&nbsp;npm&nbsp;的方式","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"background-color":"#BBDEFB","border-radius":"5px","color":"#FF9800","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"812b3a9306dd","title":"如何引入"},{"parent":"root","lineStyle":{"lineColor":"#1976D2","lineWidth":"2"},"children":[{"parent":"c723a9675abe","note":"","children":[],"id":"6c3908c4ee07","title":"这个&nbsp;package&nbsp;提供了一个&nbsp;React&nbsp;渲染器，用于将&nbsp;React&nbsp;组件渲染成纯&nbsp;JavaScript&nbsp;对象，无需依赖&nbsp;DOM&nbsp;或原生移动环境","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"c723a9675abe","children":[],"id":"a53c6f2ec719","title":"这个&nbsp;package&nbsp;提供的主要功能是在不依赖浏览器或&nbsp;jsdom&nbsp;的情况下，返回某个时间点由&nbsp;React&nbsp;DOM&nbsp;或者&nbsp;React&nbsp;Native&nbsp;平台渲染出的视图结构（类似与&nbsp;DOM&nbsp;树）快照<br>","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#FF9800","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#1976D2","lineStype":{"lineColor":"#1976D2","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#1976D2","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"c723a9675abe","title":"概览"},{"parent":"root","lineStyle":{"lineColor":"#81C784","lineWidth":"2"},"children":[{"parent":"7f3589238824","note":"","children":[{"parent":"3bd1031e7793","children":[{"parent":"e0404a81a3b7","children":[],"id":"ac631f90251d","title":"通过传来的&nbsp;React&nbsp;元素创建一个&nbsp;TestRenderer&nbsp;实例。它并不使用真实的&nbsp;DOM，但是它依然将组件树完整地渲染到内存，以便于你对它进行断言。此时将返回一个&nbsp;TestRenderer&nbsp;实例"}],"id":"e0404a81a3b7","title":"TestRenderer.create()"},{"parent":"3bd1031e7793","children":[{"parent":"ddcfdc60e97f","children":[],"id":"5902ba91924a","title":"与&nbsp;react-dom/test-utils&nbsp;中的&nbsp;act()&nbsp;相似，TestRender.act&nbsp;为断言准备一个组件。可以使用&nbsp;act()&nbsp;来包装&nbsp;TestRenderer.create&nbsp;和&nbsp;testRenderer.update"}],"id":"ddcfdc60e97f","title":"TestRenderer.act()"}],"id":"3bd1031e7793","title":"TestRenderer","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"7f3589238824","children":[{"parent":"73b962c71b7e","children":[{"parent":"c99a00393ede","children":[],"id":"e560664e8adb","title":"返回一个已渲染的的树对象。该树仅包含特定平台的节点，例如&nbsp;&lt;div&gt;&nbsp;或&nbsp;&lt;View&gt;&nbsp;和它们的&nbsp;props，但并不包含任何用户编写的组件。这对于快照测试非常方便"}],"id":"c99a00393ede","title":"testRenderer.toJSON()"},{"parent":"73b962c71b7e","children":[{"parent":"04fa68cec60d","children":[],"id":"73686e95dec3","title":"返回一个已渲染的的树对象。它所表示的内容比&nbsp;toJSON()&nbsp;提供的内容要更加详细，并且包含用户编写的组件。除非你要在测试渲染器（test&nbsp;renderer）之上编写自己的断言库，否则你可能并不需要这个方法"}],"id":"04fa68cec60d","title":"testRenderer.toTree()"},{"parent":"73b962c71b7e","children":[{"parent":"afa3afa1a9fd","children":[],"id":"b147b2574b9b","title":"使用新的根元素重新渲染内存中的树。它模拟根元素的一次&nbsp;React&nbsp;更新。如果新的元素和之前的元素有相同的&nbsp;type&nbsp;和&nbsp;key，该树将会被更新；否则，它将重挂载一个新树"}],"id":"afa3afa1a9fd","title":"testRenderer.update()"},{"parent":"73b962c71b7e","children":[{"parent":"01fa34aaf3f5","children":[],"id":"969b86f75e70","title":"卸载内存中的树，会触发相应的生命周期事件"}],"id":"01fa34aaf3f5","title":"testRenderer.unmount()"},{"parent":"73b962c71b7e","children":[{"parent":"1caf61c33700","children":[],"id":"ad430181c47e","title":"如果可用的话，返回与根元素相对应的实例。如果根元素是函数定义组件，该方法无效，因为函数定义组件没有实例"}],"id":"1caf61c33700","title":"testRenderer.getInstance()"},{"parent":"73b962c71b7e","children":[{"parent":"3a3a623ca4ac","children":[],"id":"a7e7ea44d7da","title":"返回根元素“测试实例”对象，它对于断言树中的特定节点十分有用。你可以利用它来查找其他更深层的“测试实例"}],"id":"3a3a623ca4ac","title":"testRenderer.root"}],"boundaries":[],"id":"73b962c71b7e","title":"TestRenderer&nbsp;instance","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"7f3589238824","children":[{"parent":"3753c9482f22","children":[{"parent":"2370c5e67693","children":[],"id":"09f45b2c51ec","title":"找到一个&nbsp;test(testInstance)&nbsp;返回&nbsp;true&nbsp;的后代测试实例。如果不只有一个测试实例匹配，将会报错"}],"id":"2370c5e67693","title":"testInstance.find()"},{"parent":"3753c9482f22","children":[{"parent":"3ab146757204","children":[],"id":"f303fd93be8e","title":"找到匹配指定&nbsp;type&nbsp;的后代测试实例，如果不是只有一个测试实例匹配指定的&nbsp;type，将会报错"}],"id":"3ab146757204","title":"testInstance.findByType()"},{"parent":"3753c9482f22","children":[{"parent":"a6c1fa26c7aa","children":[],"id":"98af73dfdbf7","title":"找到匹配指定&nbsp;props的后代测试实例，如果不是正好只有一个测试实例匹配指定的&nbsp;props，将会报错"}],"id":"a6c1fa26c7aa","title":"testInstance.findByProps()"},{"parent":"3753c9482f22","children":[{"parent":"68277cf837e4","children":[],"id":"9c892135d8f8","title":"找到所有&nbsp;test(testInstance)&nbsp;返回&nbsp;true&nbsp;的后代测试实例"}],"id":"68277cf837e4","title":"testInstance.findAll()"},{"parent":"3753c9482f22","children":[{"parent":"d9ae5fd387c2","children":[],"id":"b5d5eda33e0e","title":"找到所有匹配指定&nbsp;type&nbsp;的后代测试实例"}],"id":"d9ae5fd387c2","title":"testInstance.findAllByType()"},{"parent":"3753c9482f22","children":[{"parent":"a7c863cd4f56","children":[],"id":"3ae8b0f0ad7d","title":"找到所有匹配指定&nbsp;props&nbsp;的后代测试实例。\n\n"}],"id":"a7c863cd4f56","title":"testInstance.findAllByProps()"},{"parent":"3753c9482f22","children":[{"parent":"870e0558a4cd","children":[],"id":"1ed72ddfcc90","title":"该测试实例相对应的组件实例。它只能用于类定义组件，因为函数定义组件没有实例。它匹配给定的组件内部的&nbsp;this&nbsp;的值"}],"id":"870e0558a4cd","title":"testInstance.instance"},{"parent":"3753c9482f22","children":[{"parent":"72cdec149a1a","children":[],"id":"e04251fa2721","title":"该测试实例相对应的组件的类型"}],"id":"72cdec149a1a","title":"testInstance.type"},{"parent":"3753c9482f22","children":[{"parent":"94cc178609fe","children":[],"id":"51e564b093ab","title":"该测试实例相对应的组件的&nbsp;props"}],"id":"94cc178609fe","title":"testInstance.props"},{"parent":"3753c9482f22","children":[{"parent":"641aca3adb5a","children":[],"id":"1bde02dc9a53","title":"该测试实例的父测试实例"}],"id":"641aca3adb5a","title":"testInstance.parent"},{"parent":"3753c9482f22","children":[{"parent":"8b686bda86dd","children":[],"id":"5410bf749ca7","title":"该测试实例的子测试实例"}],"id":"8b686bda86dd","title":"testInstance.children"}],"boundaries":[],"id":"3753c9482f22","title":"TestInstance","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#FF9800","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"rgb(80, 194, 139)","lineStype":{"lineColor":"#E57373","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#81C784","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"7f3589238824","title":"参考"},{"parent":"root","children":[{"parent":"e33e773f1147","children":[],"boundaries":[],"id":"44860fdbfd67","title":"你可以把&nbsp;createNodeMock&nbsp;函数作为选项（option）传递给&nbsp;TestRenderer.create，进行自定义&nbsp;refs&nbsp;模拟。createNodeMock&nbsp;接受当前元素作为参数，并且返回一个模拟&nbsp;ref&nbsp;对象的。这十分有利于依赖&nbsp;refs&nbsp;组件的测试"}],"style":{"color":"#FF9800","font-weight":"bold"},"id":"e33e773f1147","title":"想法<br>"}],"root":true,"theme":"customise_7fd055efa78b","style":{"background-color":"#B2EBF2","color":"#000000","font-weight":"bold"},"id":"root","title":"Test&nbsp;Renderer","icons":[],"structure":"mind_free"}},"meta":{"exportTime":"2022-04-10 17:47:41","member":"60cca488e0b34d55bbf2954f","diagramInfo":{"creator":"60cca488e0b34d55bbf2954f","created":"2022-04-10 17:39:20","modified":"2022-04-10 17:47:31","title":"4.9Test Renderer","category":"mind_free"},"id":"6252a5c80791290727bd17e7","type":"ProcessOn Schema File","version":"1.0"}}